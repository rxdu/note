{"componentChunkName":"component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js","path":"/tech-notes/program/debugging/gdb","result":{"data":{"mdx":{"id":"e5bee71c-5266-5d26-891c-97edcbd4fc42","excerpt":"Introduction GDB debugger can be a very powerful tool for finding the cause of unexpected behaviors of your program. In a GDB debugging session, you can stepâ€¦","fields":{"slug":"/tech-notes/program/debugging/gdb/"},"frontmatter":{"title":"Using GDB Debugger","description":"A brief tutorial for using GDB to debug your program","image":null,"disableTableOfContents":null},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Using GDB Debugger\",\n  \"description\": \"A brief tutorial for using GDB to debug your program\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#introduction\",\n    \"aria-label\": \"introduction permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Introduction\"), mdx(\"p\", null, \"GDB debugger can be a very powerful tool for finding the cause of unexpected behaviors of your program. In a GDB debugging session, you can step your code by line or by instruction and you can also stop your code at a specific line, a function or an address. When your program stops, you can check the values of the variables at that moment. You can even change a variable as you want. Moreover, it allows you to check the status of the stack and inspect how the function are called. The use of GDB may seem not to be as easy as printf() but it can be much more helpful when you're trying to find a deeply hidden bug. Actually it's not as difficut to learn as it seems to be.\"), mdx(\"p\", null, \"Here are a few good tutorials to get started:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf\"\n  }, \"GDB Tutorial: A Walkthrough with Examples\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://www.dirac.org/linux/gdb/index.php\"\n  }, \"Using GNU's GDB Debugger\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://heather.cs.ucdavis.edu/~matloff/UnixAndC/CLanguage/Debug.html\"\n  }, \"Guide to Faster, Less Frustrating Debugging\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html\"\n  }, \"RMS's GDB Debugger Tutorial\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://www.delorie.com/gnu/docs/gdb/gdb_toc.html\"\n  }, \"Debugging with GDB\"))), mdx(\"p\", null, \"The official manual of GDB can be a good reference after you have already learned the basics and want to check more details of a feature:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://sourceware.org/gdb/current/onlinedocs/gdb/\"\n  }, \"GDB Online Manual\"))), mdx(\"p\", null, \"The following are my notes for quick reference of the most frequently used commands. Some of them are from the above materials.\"), mdx(\"h2\", {\n    \"id\": \"background-knowledge\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#background-knowledge\",\n    \"aria-label\": \"background knowledge permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Background Knowledge\"), mdx(\"p\", null, \"It can be very helpful to understand stack and stack frames when you use GDB for debugging. This \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://www.dirac.org/linux/gdb/02a-Memory_Layout_And_The_Stack.php#wherearewegoingtogo\"\n  }, \"page\"), \" from the tutorial \\\"Using GNU's GDB Debugger\\\" gives good explanation about them.\"), mdx(\"p\", null, \"Briefly speaking, stack is a section of the memory and whenever there is a function call, a stack frame is created in the stack. This stack frame is used to store all related information about this call including the all the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://en.wikipedia.org/wiki/Automatic_variable\"\n  }, \"automatic variables\"), \" of the newly called function, the return address and the arguments of the called function. In GDB, you can check how the functions are called from each other by inspecting the stack frames. By switching to a stack frame, you get access to variables in that scope, meaning you can check the values of local variables in the corresponding function. You cannot print or modify a variable if that variable doesn't exit in the current stack frame.\"), mdx(\"p\", null, \"In addition to stack and stack frames, check topic \\\"operating system\\\" for more information about virtual memory and memory layout.\"), mdx(\"p\", null, \"Another thing that you need to remember before starting a gdb debugging session is that you need to use \\\"-g\\\" flag when compiling your code to include debugging information in the generated executable file.\"), mdx(\"h2\", {\n    \"id\": \"frequently-used-commands\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#frequently-used-commands\",\n    \"aria-label\": \"frequently used commands permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Frequently Used Commands\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Starting a debugging session\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ gdb <name-of-executable>\\n(gdb) run arg1 arg2\\n\")), mdx(\"p\", null, \"Arg1 and arg2 will be remembered and used when you run again. If you want to reset or clear the arguments, use:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"(gdb) set args <arg1/arg2/.../or none to clear saved args>\\n\")), mdx(\"p\", null, \"If your program is already running, you can still use gdb to debug it.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ gdb <name-of-executable> <process-id>\\n\")), mdx(\"p\", null, \"Or you can use the attach command:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ gdb\\n(gdb) attach <process-id>\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Using breakpoints and watchpoints\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"(gdb) break <function-name> # set break point by function name\\n(gdb) break <line-number>\\n(gdb) break <file-name:line-number>\\n(gdb) break <virtual-memory-address>\\n(gdb) break <place-to-break> if <condition>\\n(gdb) info breakpoints  # list all all breakpoints and watchpoints\\n(gdb) disable n     # n is the breakpoint/watchpoint identifier number from listed info\\n(gdb) enable n\\n(gdb) clear <function-name>/<line-number>/<file-name:line-number>/<virtual-memory-address>\\n(gdb) delete <breakpoint-identifier>\\n(gdb) delete        # delete all breakpoints\\n(gdb) continue      # continue execution from breakpoint\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Manipulating variables\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"(gdb) ptype <var-name>  # print data type\\n(gdb) print <var-name>  # print data value\\n(gdb) print /FMT <var-name> # o:octal,x:hex,d:decimal,u:unsigned decimal,t:binary,  f:float,a:address,c:char\\n(gdb) set <var-name> = <new-value>\\n(gdb) print <var-name> = <new-value>\\n(gdb) display <var-name>/<expression>   # automatically display specified var once program is stopped\\n(gdb) info display          # print the list of auto-display items\\n(gdb) enable/disable <display-item-num> # enable or disable the display a var/exp\\n(gdb) undisplay             # delete the item from display list\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Stepping and resuming program\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"(gdb) step          # step by line\\n(gdb) istep         # step by instruction\\n(gdb) next          # continue to next line in current stack frame (including function)\\n(gdb) continue\\n(gdb) where         # show current line number\\n(gdb) list <none>/<line-num>/<range>/<function-name>/<*address>\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Checking stack and stack frames\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"(gdb) backtrace     # display the current stack status\\n(gdb) frame         # show current stack frame\\n(gdb) frame <frame-num> # switch to frame <frame-num>\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"depth":2,"value":"Introduction"},{"depth":2,"value":"Background Knowledge"},{"depth":2,"value":"Frequently Used Commands"}]}},"pageContext":{"slug":"/tech-notes/program/debugging/gdb/","next":{"label":"Back to Main Page","link":"https://rdu.im"},"repositoryEditUrl":"https://github.com/rxdu/note/tree/main/src/docs/tech-notes/program/debugging/gdb.mdx","repositoryProvider":"GitHub"}},"staticQueryHashes":["1954253342","2328931024","2501019404","973074209"]}